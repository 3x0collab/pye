{% extends 'layouts/base.html' %}
{% load static %}
{% load humanize %}
{% block title %} UI Tables {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}

<style type="text/css">
	
	/* Dropdown Button */
.dropbtn {
  font-size: 14px;
  border: none;
  height: 40px;
}

/* The container <div> - needed to position the dropdown content */
.dropdown {
  position: relative;
  display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
  display: none;
  position: absolute; 
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #ddd;}

/* Show the dropdown menu on hover */
.dropdown:hover .dropdown-content {display: block;}

/* Change the background color of the dropdown button when the dropdown content is shown */
.dropdown:hover .dropbtn {color: #3e8e41;}
 
/* Modal Header */
#exampleModal .modal-header {
  padding: 2px 16px;
  background-color: #051837;
  color: white;
}

/* Modal Content */
#exampleModal  .modal-content {
  position: relative; 
  margin: auto;
  padding: 0; 
/*  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);*/
  animation-name: animatetop;
  animation-duration: 0.4s
}

#exampleModal  .modal-footer {
  padding: 0px; 
  color: white;
  padding-right: 12px;
  padding-top: 7px;
  background-color: white;
  border: 0px solid;
}

#chatModal .modal-header {
  background-color: #051837;
  color: white;
}


/* Modal Body */
.modal-body {padding: 2px 16px;}

/* Modal Footer */
#chatModal .modal-footer {
  padding: 0px; 
  color: white;
  width: 50%;
  margin: 4px;
  border: 1px solid #dee2e6 !important;
  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
      border-radius: 13px;
}



#chatModal .modal-content {
  position: relative; 
  margin: auto;
  padding: 0; 
  width: 100%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  animation-name: animatetop;
  animation-duration: 0.4s
}



/* Add Animation */
@keyframes animatetop {
  from {top: -300px; opacity: 0}
  to {top: 20; opacity: 1}
}


 .user-icon {
 	width: 30px;
    height: 30px;
    border: 1px solid silver;
    padding: 4px;
    border-radius: 4px;
    margin-right: 15px;
 }

    .message {
      padding: 6px;
      margin-bottom: 10px;
    }

    .user-message {
/*      background-color: #f5f5f5;*/
      padding: 6px;
/*    border-radius: 4px;*/
/*    font-family: 'Courier New', monospace;*/
    font-size: 14px;
    line-height: 1.5;
/*    color: #333;*/
    overflow-x: auto;
    text-wrap: wrap;
    }

 #connection:hover {
 box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
}

.edit-icon {
	float: right;
}

.message {
	    display: flex;
}

input {
  min-height: 40px;
}

pre {
      padding: 10px;
/*    border-radius: 4px;*/
/*    font-family: 'Courier New', monospace;*/
    font-size: 14px;
    line-height: 1.5;
    color: #333;
    overflow-x: auto;
    text-wrap: wrap;
        background-color: #dcdcdc5e;
    border-top: 1px solid #c0c0c096;
    border-bottom: 1px solid #c0c0c096;
}

.flex-container {
        padding-left:10px ;
            display: flex;
    justify-content: flex-start;
    align-items: center;
    min-height: 50px;
}

}



/* Bootstrap 4 text input with search icon */

.has-search .form-control {
    padding-left: 2.375rem;
}

.has-search .form-control-feedback {
    position: absolute;
    z-index: 2;
    display: block;
    width: 2.375rem;
    height: 2.375rem;
    line-height: 2.375rem;
    text-align: center;
    pointer-events: none;
    color: #aaa;
}

.menu-icon .icon {
        background: #2196f35e;
  
    height: 43px;
    width: 43px;
    border-radius: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.menus {

  display: flex;
  justify-content: flex-end;
  align-items: center;
          margin-top: -18px;
          margin-left: 30px;
}

.menus svg {
  margin-right: 13px;
}


/* Modal Header */
#deleteModal .modal-header {
  padding: 2px 16px;
  background-color: #051837;
  color: white;
}

/* Modal Content */
#deleteModal  .modal-content {
  position: relative; 
  margin: auto;
  padding: 0; 
  width: 70%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  animation-name: animatetop;
  animation-duration: 0.4s
}

 .custom-col {
    flex-basis: 25%;
    max-width: 25%;
    border-radius: 8px;
    min-width: 300px;
  }

.dropdown-content a {
  border-bottom: 1px solid #eee;
}

</style>
{% endblock stylesheets %}
{% load widget_tweaks %}
{% block content %}
     <div class="banner-area text-combo top-pad-90 rectangular-shape bg-light-gradient ">
        <div class="item">
            <div class="box-table">
                <div class="box-cell">

                    <div class="containedr mx-4 ">
                        <div class="row cards px-5" style="display: flex; align-items: flex-start; flex-direction: row; width:100%;">








                          <div style="display:flex; justify-content:space-between; align-items:center; " >
                            <h4 class="my-2 text-dark" > Models - PMs ({{connections|length}}) <svg width="34px" height="34px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8 10L12 14L16 10" stroke="#200E32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg> </h4>

<div class='menu-icon'  style="display: flex; justify-content:space-between;align-items: center; flex-direction: row;">
 

<span class="icons" >
<svg fill="#12116f" width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M20,1H4A3,3,0,0,0,1,4V14a3,3,0,0,0,3,3H20a3,3,0,0,0,3-3V4A3,3,0,0,0,20,1Zm1,13a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3H20a1,1,0,0,1,1,1Zm-2-2a1,1,0,0,1-1,1H6a1,1,0,0,1,0-2H18A1,1,0,0,1,19,12Zm0-6a1,1,0,0,1-1,1H16a1,1,0,0,1,0-2h2A1,1,0,0,1,19,6ZM10,6a1,1,0,0,1,1-1h2a1,1,0,0,1,0,2H11A1,1,0,0,1,10,6ZM5,6A1,1,0,0,1,6,5H8A1,1,0,0,1,8,7H6A1,1,0,0,1,5,6ZM19,9a1,1,0,0,1-1,1H16a1,1,0,0,1,0-2h2A1,1,0,0,1,19,9ZM10,9a1,1,0,0,1,1-1h2a1,1,0,0,1,0,2H11A1,1,0,0,1,10,9ZM5,9A1,1,0,0,1,6,8H8a1,1,0,0,1,0,2H6A1,1,0,0,1,5,9Zm9.707,10.293a1,1,0,0,1,0,1.414l-2,2a1,1,0,0,1-1.414,0l-2-2a1,1,0,0,1,1.414-1.414L12,20.586l1.293-1.293A1,1,0,0,1,14.707,19.293Z"></path></g></svg>

</span>
</div>



                        </div>





   <div class='search-filter mt-1  ' style="    background: white;
    padding-top: 30px;
    padding-bottom: 15px;
    border: 1.3px solid silver;
    border-radius: 20px;" >
                                   
                                  <form method="get" class="form-group has-search mx-2   " style="display:flex; flex-direction: row; align-items: center; justify-content:flex-start;" >
    <div style="width:70%; margin-right:15px ;" >
    <span style="    margin-top: 4px;" class="fa fa-search form-control-feedback"></span>
    <input style="    border-radius: 400px;
    background-color: #2196f314; 
    height: 44px;padding-left: 40px;
    " type="text" class="form-control" placeholder="Search Models" name="q"   value="{{q}}" >
    </div>
     <span class="mx-4 text-dark font-weight-bold " style="display: flex;" > <svg style="margin-right: 6px;" width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M21 6H19M21 12H16M21 18H16M7 20V13.5612C7 13.3532 7 13.2492 6.97958 13.1497C6.96147 13.0615 6.93151 12.9761 6.89052 12.8958C6.84431 12.8054 6.77934 12.7242 6.64939 12.5617L3.35061 8.43826C3.22066 8.27583 3.15569 8.19461 3.10948 8.10417C3.06849 8.02393 3.03853 7.93852 3.02042 7.85026C3 7.75078 3 7.64677 3 7.43875V5.6C3 5.03995 3 4.75992 3.10899 4.54601C3.20487 4.35785 3.35785 4.20487 3.54601 4.10899C3.75992 4 4.03995 4 4.6 4H13.4C13.9601 4 14.2401 4 14.454 4.10899C14.6422 4.20487 14.7951 4.35785 14.891 4.54601C15 4.75992 15 5.03995 15 5.6V7.43875C15 7.64677 15 7.75078 14.9796 7.85026C14.9615 7.93852 14.9315 8.02393 14.8905 8.10417C14.8443 8.19461 14.7793 8.27583 14.6494 8.43826L11.3506 12.5617C11.2207 12.7242 11.1557 12.8054 11.1095 12.8958C11.0685 12.9761 11.0385 13.0615 11.0204 13.1497C11 13.2492 11 13.3532 11 13.5612V17L7 20Z" stroke="#12116f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>  Filter: </span>
       <select  class=" form-control form-select" value="{{filter}}" id="filter" name="filter" style="max-width:300px; 
       padding-left:12px !important;     border-radius: 400px;">
      <option value="" > -- Select --  </option>
      <option value="connector" > Connector  </option>
 
   
        </select>
           
  </form>
<p class="wow fadeInLeft mb-0 text-secondary w-85 m-3 font-weight-boldd " data-wow-duration="1.5s" style="font-size:16px"  >
                                   Engage in meaningful conversations and extract insights from your private data.
                                    </p>
</div>





<div class="main mb-4  ">
  
  <div class='search-filter mt-4  w-100' style="display:flex; flex-direction: row; align-items: center; justify-content:space-between;" >



   <a class="btn circle btn-md btn-dark wow fadeInUp" style="  height: 40px" id='next' href="/customer/source-credential?source-val=pye&type_name=ai model&redirect=ai_models" role="button" aria-pressed="true">   <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16"> <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/> </svg> Create AI Model (PM) »</a>



<div style="display:flex; justify-content:center; align-items:center;" >

                                  <form method="get" class="form-group   " style="display:flex; flex-direction: row; align-items: center; justify-content:flex-start;"   >

  <span class="  text-dark font-weight-bold" style="margin-right: 10px; display: flex;" > <svg style="margin-right: 6px;"  width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M10.875 4.00002C10.875 3.69877 10.6948 3.42676 10.4173 3.30934C10.1399 3.19192 9.81916 3.25188 9.60289 3.46159L5.47789 7.4616C5.33222 7.60285 5.25 7.79711 5.25 8.00002C5.25 8.20293 5.33222 8.39719 5.47789 8.53844L9.60289 12.5384C9.81916 12.7482 10.1399 12.8081 10.4173 12.6907C10.6948 12.5733 10.875 12.3013 10.875 12V8.75002L18 8.75002C18.4142 8.75002 18.75 8.41423 18.75 8.00002C18.75 7.58581 18.4142 7.25002 18 7.25002L10.875 7.25002V4.00002Z" fill="#1C274C"></path> <path opacity="0.5" d="M13.125 12C13.125 11.6988 13.3052 11.4268 13.5827 11.3093C13.8601 11.1919 14.1808 11.2519 14.3971 11.4616L18.5221 15.4616C18.6678 15.6029 18.75 15.7971 18.75 16C18.75 16.2029 18.6678 16.3972 18.5221 16.5384L14.3971 20.5384C14.1808 20.7482 13.8601 20.8081 13.5827 20.6907C13.3052 20.5733 13.125 20.3013 13.125 20V16.75H6C5.58579 16.75 5.25 16.4142 5.25 16C5.25 15.5858 5.58579 15.25 6 15.25L13.125 15.25L13.125 12Z" fill="#1C274C"></path> </g></svg> Sort by: </span>
       <select  class=" form-control form-select" value="{{sort}}" id="sort" name="sort" style="width:200px; 
       padding-left:12px !important;     border-radius: 400px;">
      <option value="Alphabetically (A-Z)" > Alphabetically (A-Z) </option>
      <option value="Alphabetically (A-Z)" > Alphabetically (Z-A) </option>


        </select>
           
  </form>

  <div class="menus">

<svg width="20px" height="20px" viewBox="0 -0.5 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#12116f"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>menu_navigation_grid [#1530]</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Dribbble-Light-Preview" transform="translate(-59.12116f, -200.12116f)" fill="#12116f"> <g id="icons" transform="translate(56.12116f, 160.12116f)"> <path d="M14.55,60 L24,60 L24,51 L14.55,51 L14.55,60 Z M3,60 L12.45,60 L12.45,51 L3,51 L3,60 Z M14.55,49 L24,49 L24,40 L14.55,40 L14.55,49 Z M3,49 L12.45,49 L12.45,40 L3,40 L3,49 Z" id="menu_navigation_grid-[#1530]"> </path> </g> </g> </g> </g></svg>


<svg viewBox="0 0 600 600" version="1.1" id="svg9724" sodipodi:docname="menu.svg" inkscape:version="1.2.2 (1:1.2.2+202212051550+b0a8486541)" width="20px" height="20px" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" fill="#12116f"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <defs id="defs9728"></defs> <sodipodi:namedview id="namedview9726" pagecolor="#12116f" bordercolor="#666666" borderopacity="1.0" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" showgrid="true" inkscape:zoom="0.59480855" inkscape:cx="-49.59579" inkscape:cy="515.29185" inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="0" inkscape:window-y="1080" inkscape:window-maximized="1" inkscape:current-layer="g10449" showguides="true"> <inkscape:grid type="xygrid" id="grid9972" originx="0" originy="0"></inkscape:grid> <sodipodi:guide position="-260,300" orientation="0,-1" id="guide383" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="300,520" orientation="1,0" id="guide385" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="240,520" orientation="0,-1" id="guide939" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="220,80" orientation="0,-1" id="guide941" inkscape:locked="false"></sodipodi:guide> </sodipodi:namedview> <g id="g10449" transform="matrix(0.95173205,0,0,0.95115787,13.901174,12.168794)" style="stroke-width:1.05103"> <g id="path10026" inkscape:transform-center-x="-0.59233046" inkscape:transform-center-y="-20.347403" transform="matrix(1.3807551,0,0,1.2700888,273.60014,263.99768)"></g> <g id="g11314" transform="matrix(1.5092301,0,0,1.3955555,36.774048,-9.4503933)" style="stroke-width:50.6951"></g> <path style="color:#12116f;fill:#12116f;stroke-width:1.05104;stroke-linecap:square;stroke-linejoin:round;-inkscape-stroke:none;paint-order:stroke fill markers" d="m 116.82051,533.90848 c 0,-35.77923 -30.001428,-65.78273 -65.71225,-65.78274 -35.710867,10e-6 -65.714445,30.00351 -65.714445,65.78274 0,35.7791 30.003578,65.78265 65.714445,65.78265 35.710822,0 65.71225,-30.00355 65.71225,-65.78265 z" id="path1237"></path> <path style="color:#12116f;fill:#12116f;stroke-width:1.05104;stroke-linecap:square;stroke-linejoin:round;-inkscape-stroke:none;paint-order:stroke fill markers" d="m 116.82051,302.6125 c 0,-35.77918 -30.001428,-65.78266 -65.71225,-65.78267 -35.710867,1e-5 -65.714445,30.00349 -65.714445,65.78267 2.6e-5,35.77922 30.003597,65.78043 65.714445,65.78045 35.710806,-2e-5 65.71224,-30.00123 65.71225,-65.78045 z" id="path1235"></path> <path style="color:#12116f;fill:#12116f;stroke-width:1.05104;stroke-linecap:square;stroke-linejoin:round;-inkscape-stroke:none;paint-order:stroke fill markers" d="m 116.82051,71.313209 c 0,-35.779199 -30.001428,-65.7804582 -65.71225,-65.7804662 -35.710867,8e-6 -65.714445,30.0012672 -65.714445,65.7804662 0,35.779271 30.003578,65.782741 65.714445,65.782751 35.710822,-1e-5 65.71225,-30.00348 65.71225,-65.782751 z" id="path346"></path> <path style="color:#12116f;fill:#12116f;stroke-width:1.05103;stroke-linecap:round;-inkscape-stroke:none" d="m 211.58808,21.527961 a 47.572886,49.785578 0 0 0 -47.57256,49.787552 47.572886,49.785578 0 0 0 47.57256,49.785227 H 568.24859 A 47.572886,49.785578 0 0 0 615.82336,71.315513 47.572886,49.785578 0 0 0 568.24859,21.527961 Z" id="path1011"></path> <path style="color:#12116f;fill:#12116f;stroke-width:1.05103;stroke-linecap:round;-inkscape-stroke:none" d="m 211.58808,252.82616 a 47.572886,49.785578 0 0 0 -47.57256,49.78524 47.572886,49.785578 0 0 0 47.57256,49.78523 h 356.66051 a 47.572886,49.785578 0 0 0 47.57477,-49.78523 47.572886,49.785578 0 0 0 -47.57477,-49.78524 z" id="path1011-7"></path> <path style="color:#12116f;fill:#12116f;stroke-width:1.05103;stroke-linecap:round;-inkscape-stroke:none" d="m 211.58808,484.1232 a 47.572886,49.785578 0 0 0 -47.57256,49.78523 47.572886,49.785578 0 0 0 47.57256,49.78524 h 356.66051 a 47.572886,49.785578 0 0 0 47.57477,-49.78524 47.572886,49.785578 0 0 0 -47.57477,-49.78523 z" id="path1011-5"></path> </g> </g></svg>

<svg fill="#12116f" version="1.1" id="Layer_1" xmlns:x="&amp;ns_extend;" xmlns:i="&amp;ns_ai;" xmlns:graph="&amp;ns_graphs;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25px" height="25px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <metadata> <sfw xmlns="&amp;ns_sfw;"> <slices> </slices> <slicesourcebounds width="505" height="984" bottomleftorigin="true" x="0" y="-552"> </slicesourcebounds> </sfw> </metadata> <g> <g> <g> <path d="M20,5H4C3.4,5,3,4.6,3,4s0.4-1,1-1h16c0.6,0,1,0.4,1,1S20.6,5,20,5z"></path> </g> </g> <g> <g> <path d="M20,21H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h16c0.6,0,1,0.4,1,1S20.6,21,20,21z"></path> </g> </g> <g> <g> <path d="M20,13H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h16c0.6,0,1,0.4,1,1S20.6,13,20,13z"></path> </g> </g> </g> </g></svg>

  </div>
  </div>




</div>
                <hr style="margin-top: 0px;" />               

 
{% include 'home/connections.html' %}



	</div>


<div class="m-4" style="display: flex; justify-content:flex-end; align-items:center;" >

{% if connections.has_other_pages %}
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if connections.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ connections.previous_page_number }}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
            {% endif %}
            {% for i in connections.paginator.page_range %}
                {% if connections.number == i %}
                    <li class="page-item active"><a class="page-link" href="#">{{ i }} <span class="sr-only">(current)</span></a></li>
                {% else %}
                    <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}
            {% if connections.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ connections.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
{% endif %}

<div class="results-per-page">
  <label for="resultsPerPage">Results per page:</label>
  <select id="resultsPerPage" onchange="changeResultsPerPage(this.value)">
    <option value="5" {% if connections.paginator.per_page == 5 %}selected{% endif %}>5</option>
    <option value="10" {% if connections.paginator.per_page == 10 %}selected{% endif %}>10</option>
    <option value="20" {% if connections.paginator.per_page == 20 %}selected{% endif %}>20</option>
    <option value="30" {% if connections.paginator.per_page == 30 %}selected{% endif %}>30</option>
    <!-- Add more options for different results per page as needed -->
  </select>
</div>

</div>



                        </div>  
                    </div>
                </div>
            </div>
        </div>
    </div>
<div>


          
          
        </div>
      </div>
    </div>

 



 









 

<!-- Chat Modal -->
<div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="text-white" id='chat-modal-header' ></h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
    <div class="modal-body my-3" id='chat-modal-body'  style="    padding: 2px 16px;
    height: 35vw;
    overflow-y: scroll;">
    <p class="text-center   " style="color:silver; margin: -5px; font-size: 14px; " >Chats here with ur data !</p>
    <hr />

     <div id="chat-container">
 
      <!-- Add more messages here -->
    </div>
    
  </div>
  <div style=" display: flex; justify-content: center;">
      <div class="modal-footer my-2" style="width: 70%;">
          <div class="input-group ">
      <input type="text" id="input-field" class="form-control" placeholder="Send a message..." style="border:0px solid"  >
     
        <button id="send-button" class="btn btn-link btn-sm " type="button" style="margin-bottom:2px !important; margin-top: 0px;
        width: 30px;padding-left: 0px; margin-right: 14px; " >
     <svg width="36px" height="36px" viewBox="0 0 24 24" fill="#051837" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.7 8.97989L4.14 17.7099C4.05 17.3799 4 17.0299 4 16.6699V7.32989C4 4.24989 7.33 2.32989 10 3.86989L14.04 6.19989L18.09 8.53989C18.31 8.66989 18.52 8.80989 18.7 8.97989Z" fill="#e2e3e4"></path> <path opacity="0.4" d="M18.0907 15.4598L14.0407 17.7998L10.0007 20.1298C8.0907 21.2298 5.8407 20.5698 4.7207 18.9598L5.1407 18.7098L19.5807 10.0498C20.5807 11.8498 20.0907 14.3098 18.0907 15.4598Z" fill="#051837"></path> </g></svg></button>
  
    </div>
      </div>
      </div>
    </div>
  </div>
</div>



 

<!-- Create Chat Bot Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title text-white py-2" id="exampleModalLabel">Create Personalized Chatbot</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body px-2 ">
{% include 'home/chatbot_form.html' %}
<div class="modal-footer"  >
        <button type="button" id="submitBtn" class="btn circle btn-md btn-success wow fadeInUp" style="    height: 40px"    role="button" aria-pressed="true">Save Bot Prompt »</button>
      </div>
</div>
      
    </div>
  </div>
</div>





<!-- Delete Chat Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title text-white py-2" id="deleteModalLabel">Delete Chatbot</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body px-5 ">
    <p class="text-center my-4 text-danger" ><svg style="margin-right:5px; margin-top:-2px;" width="22px" height="22px"  viewBox="0 -5 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" fill="#12116f"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>delete</title> <desc>Created with Sketch Beta.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"> <g id="Icon-Set-Filled" sketch:type="MSLayerGroup" transform="translate(-518.12116f, -1146.12116f)" fill="#bd0f0f"> <path d="M540.647,1159.24 C541.039,1159.63 541.039,1160.27 540.647,1160.66 C540.257,1161.05 539.623,1161.05 539.232,1160.66 L536.993,1158.42 L534.725,1160.69 C534.331,1161.08 533.692,1161.08 533.298,1160.69 C532.904,1160.29 532.904,1159.65 533.298,1159.26 L535.566,1156.99 L533.327,1154.76 C532.936,1154.37 532.936,1153.73 533.327,1153.34 C533.718,1152.95 534.352,1152.95 534.742,1153.34 L536.981,1155.58 L539.281,1153.28 C539.676,1152.89 540.314,1152.89 540.708,1153.28 C541.103,1153.68 541.103,1154.31 540.708,1154.71 L538.408,1157.01 L540.647,1159.24 L540.647,1159.24 Z M545.996,1146 L528.051,1146 C527.771,1145.98 527.485,1146.07 527.271,1146.28 L518.285,1156.22 C518.074,1156.43 517.983,1156.71 517.998,1156.98 C517.983,1157.26 518.074,1157.54 518.285,1157.75 L527.271,1167.69 C527.467,1167.88 527.723,1167.98 527.979,1167.98 L527.979,1168 L545.996,1168 C548.207,1168 550,1166.21 550,1164 L550,1150 C550,1147.79 548.207,1146 545.996,1146 L545.996,1146 Z" id="delete" sketch:type="MSShapeGroup"> </path> </g> </g> </g></svg>  Are you sure you want to delete this bot? </p>
      <div class="modal-footer" style="width: 100%;">

        <a type="button" href="" id="deleteBtn" class="btn circle btn-md btn-danger wow fadeInUp" style="    height: 40px"    role="button" aria-pressed="true"> Delete »</a>

      </div>
    </div>
  </div>
</div>
</div>









    {% include "includes/footer.html" %}
    
  </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

 


  <script>

 
 let animationIcon = `     <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="28px" height="28px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
<circle cx="84" cy="50" r="10" fill="#e15b64">
    <animate attributeName="r" repeatCount="indefinite" dur="0.25s" calcMode="spline" keyTimes="0;1" values="10;0" keySplines="0 0.5 0.5 1" begin="0s"></animate>
    <animate attributeName="fill" repeatCount="indefinite" dur="1s" calcMode="discrete" keyTimes="0;0.25;0.5;0.75;1" values="#e15b64;#abbd81;#f8b26a;#f47e60;#e15b64" begin="0s"></animate>
</circle><circle cx="16" cy="50" r="10" fill="#e15b64">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
  <animate attributeName="cx" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="0s"></animate>
</circle><circle cx="50" cy="50" r="10" fill="#f47e60">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.25s"></animate>
  <animate attributeName="cx" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.25s"></animate>
</circle><circle cx="84" cy="50" r="10" fill="#f8b26a">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.5s"></animate>
  <animate attributeName="cx" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.5s"></animate>
</circle><circle cx="16" cy="50" r="10" fill="#abbd81">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="0;0;10;10;10" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.75s"></animate>
  <animate attributeName="cx" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.25;0.5;0.75;1" values="16;16;16;50;84" keySplines="0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.75s"></animate>
</circle>
</svg>`



$(document).ready(function() {

  $(".chatbot_model").click(function() {
   window.location.href = '/customer/ai_models/'+ $(this).attr('pk')
  })


$(".delete-bot").click(function(event) {  
localStorage.setItem("selectedConn",$(this).attr('pk'))
$("#deleteBtn").attr('href',`/customer/ai_models/delete?pk=${$(this).attr('pk')}`)
$("h6#deleteModalLabel").text("Delete Model (" + $(this).attr('chat-name')+")" )
$("input#chatbots_pk").val($(this).attr('pk') )
// localStorage.setItem("selectedConn",pk)
});
    

 
});
 









$(document).ready(function() {
$(".chat-btn").click(function(event) {
   var pk = $(this).attr('pk')
$("#chat-container").text('')
localStorage.setItem("selectedConn",$(this).attr('pk'))
    getMessage( pk) 

$("#chat-modal-header").text($(this).attr('chat-name') +" (Chat Model)")
// localStorage.setItem("selectedConn",pk)
});


})

    
$(".create-bot").click(function(event) {  
localStorage.setItem("selectedConn",$(this).attr('pk'))

$("h6#exampleModalLabel").text("Create Personalized Chatbot for " + $(this).attr('chat-name') )
$("input#connections_pk").val($(this).attr('pk') )
// localStorage.setItem("selectedConn",pk)
});

 




  // Make an AJAX request to the server
  let sendIcon = `<svg width="36px" height="36px" viewBox="0 0 24 24" fill="#051837" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.7 8.97989L4.14 17.7099C4.05 17.3799 4 17.0299 4 16.6699V7.32989C4 4.24989 7.33 2.32989 10 3.86989L14.04 6.19989L18.09 8.53989C18.31 8.66989 18.52 8.80989 18.7 8.97989Z" fill="#e2e3e4"></path> <path opacity="0.4" d="M18.0907 15.4598L14.0407 17.7998L10.0007 20.1298C8.0907 21.2298 5.8407 20.5698 4.7207 18.9598L5.1407 18.7098L19.5807 10.0498C20.5807 11.8498 20.0907 14.3098 18.0907 15.4598Z" fill="#051837"></path> </g></svg>`





// Send message to the server
function sendMessage(message) {



  $('#send-button').html(animationIcon)
  $('#send-button').prop('disabled', true);
  $.ajax({
    url: '/customer/process_message', // URL to your Django view for processing messages
    type: 'GET',
    data: {
      message: message,
      pk:localStorage.getItem("selectedConn")
    },
    success: function(res) {
      // Handle the response from the server
        $('#send-button').html(sendIcon)
         $('#send-button').prop('disabled', false);
      displayResponse(res.response);
    },
    error: function(error) {
       $('#send-button').html(sendIcon)
         $('#send-button').prop('disabled', false);

      console.log('Error:', error);
    }
  });
}

// Handle user input and send the message
function handleUserInput() {
  var inputField = document.getElementById('input-field');
  var message = inputField.value.trim();

  if (message !== '') {
    displayMessage(message);
    sendMessage(message);
    inputField.value = '';
  }
}



function getMessage(pk) {
  // Make an AJAX request to the server
  $('#send-button').html(animationIcon)
  $.ajax({
    url: '/customer/process_message', // URL to your Django view for processing messages
    type: 'GET',
    data: {
      pk 
    },
    success: function(res) {
      // Handle the response from the server
      mergeMessage(res.response);
    },
    error: function(error) {
       $('#send-button').html(sendIcon)

      console.log('Error:', error);
    }
  });
}


function mergeMessage(response){
  let chat_history = JSON.parse(JSON.parse(response).chat_history||'[]')
  // displayResponse(JSON.parse(response).greeting ||"Hi, how can I help you today?")
  chat_history.forEach(chat=>{

if (chat.type === "HumanMessage"){
  displayMessage(chat.content)
} else {
  displayResponse(chat.content)
}
 
  })
        $('#send-button').html(sendIcon)

 
}


// Display user message in the chat container

  function displayMessage(message) {
  var chatContainer = document.getElementById('chat-container');
  var messageElement = document.createElement('div');
  messageElement.classList.add('message', 'user-message');

  // Create SVG user icon element
  var userIcon = document.createElement("img");
userIcon.setAttribute("class", "icon user-icon");
userIcon.setAttribute("src", "https://img.icons8.com/?size=512&id=84861&format=png");
userIcon.setAttribute("style", "border-radius:500px;");
 

  // Create message text element
  var messageText = document.createElement('span');
  messageText.textContent = message;

  // Create SVG icon element at the end of the message
  var svgIcon = document.createElement("img");
svgIcon.setAttribute("class", "icon edit-icon");
svgIcon.setAttribute("src", "https://img.icons8.com/?size=512&id=42322&format=png");

  // Append elements to the message element
  messageElement.appendChild(userIcon);
  messageElement.appendChild(messageText);
  // messageElement.appendChild(svgIcon);

  // Append message element to the chat container
  chatContainer.appendChild(messageElement);
  chatContainer.scrollTop = chatContainer.scrollHeight;

  let s =  document.getElementById('chat-modal-body')
  console.log('top',s.scrollHeight)
s.scrollTop = s.scrollHeight;

}


// Display bot response in the chat container
function displayResponse(response) {
  var chatContainer = document.getElementById('chat-container');
  var messageElement = document.createElement('pre');
  messageElement.classList.add('message', 'bot-message');
  messageElement.textContent = response;
  chatContainer.insertAdjacentElement('beforeend', messageElement);
  chatContainer.scrollTop = chatContainer.scrollHeight;

  let s =  document.getElementById('chat-modal-body')
s.scrollTop = s.scrollHeight;

}

// Attach event listener to the send button
$('#send-button').click(handleUserInput);



function changeResultsPerPage(resultsPerPage) {
    // Get the current URL and remove the existing 'page' query parameter
    const url = window.location.href;
    const urlWithoutPage = url.replace(/[\?&]page=\d+/gi, '');

    // Redirect to the new URL with the updated 'per_page' query parameter
    window.location.href = `${urlWithoutPage}?per_page=${resultsPerPage}`;
  }




  </script>
{% endblock javascripts %}

